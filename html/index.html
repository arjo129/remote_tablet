<html>
    <title>
        Remote Tablet
    </title>

    <body>
        <canvas id="draw" width="100%", height="100%">

        </canvas>
        <script>
                var canvas = document.getElementById('draw');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight; 

                function eventToJson (evt) {
                    let res = {
                        "x": evt.touches[0].pageX,
                        "y": evt.touches[0].pageY,
                        "force": evt.touches[0]["force"],
                        "windowWidth": window.innerWidth,
                        "windowHeight": window.innerHeight,
                    }
                    return JSON.stringify(res);
                }

                canvas.ontouchstart = function (evt) {                    
                    socket.send(eventToJson(evt));
                }
                canvas.ontouchmove = function (evt) {
                    socket.send(eventToJson(evt));
                }
                
                const socket = new WebSocket('ws://'+window.location.hostname+':2794', "rust-websocket");
                
                // Connection opened
                socket.addEventListener('open', function (event) {
                    console.log("Connected !!");
                });
                
                // Listen for messages
                socket.addEventListener('message', function (event) {
                    console.log('Message from server ', event.data);
                });

        </script>
    </body>
    
</html>