<html>
    <head>
        <title>Remote Tablet</title>
        <script type="text/javascript" src="https://cdn.rawgit.com/ricmoo/aes-js/e27b99df/index.js"></script>
        <style>
            #draw {
                -moz-user-select: -moz-none;
                -khtml-user-select: none;
                -webkit-user-select: none;

                /*
                    Introduced in IE 10.
                    See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
                */
                -ms-user-select: none;
                user-select: none;
                width: 100%;
                height: 100%;
            }
            body {
                background-color: #fefefe;
                margin: 0px;
                padding: 0px;
            }
        </style>
    </head>
    <body>
        <canvas id="draw" width="100%" height="100%">

        </canvas>
        <script>
                var canvas = document.getElementById('draw');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight; 

                function eventToJson (evt) {
                    let res = {
                        "type": "touch",
                        "x": evt.touches[0].pageX,
                        "y": evt.touches[0].pageY,
                        "force": evt.touches[0]["force"],
                        "touch_type": evt.touches[0].touchType,
                        "windowWidth": window.innerWidth,
                        "windowHeight": window.innerHeight
                    }
                    return JSON.stringify(res);
                }

                canvas.ontouchstart = function (evt) {                    
                    socket.send(eventToJson(evt));
                }
                canvas.ontouchmove = function (evt) {
                    socket.send(eventToJson(evt));
                }
                canvas.ontouchend = function(evt) {
                    socket.send(JSON.stringify({"type": "end"}))
                }
                
                const socket = new WebSocket('ws://'+window.location.hostname+':2794', "rust-websocket");
                
                // Connection opened
                socket.addEventListener('open', function (event) {
                    console.log("Connected !!");
                });
                
                // Listen for messages
                socket.addEventListener('message', function (event) {
                    console.log('Message from server ', event.data);
                });
                

        </script>
    </body>
    
</html>